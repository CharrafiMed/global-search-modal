// resources/js/search.js
var search_default = ({
  recentSearchesKey,
  favoriteSearchesKey,
  maxItemsAllowed,
  retainRecentIfFavorite
}) => ({
  search_history: [],
  favorite_items: [],
  init() {
    this.search_history = this.getLocalStorage(recentSearchesKey);
    this.favorite_items = this.getLocalStorage(favoriteSearchesKey);
    this.$watch(
      "search_history",
      (val) => this.setLocalStorage(recentSearchesKey, val)
    );
    this.$watch(
      "favorite_items",
      (val) => this.setLocalStorage(favoriteSearchesKey, val)
    );
  },
  getLocalStorage(key) {
    return JSON.parse(localStorage.getItem(key)) || [];
  },
  setLocalStorage(key, value) {
    localStorage.setItem(key, JSON.stringify(value));
  },
  updateList(list, newItem) {
    return [
      newItem,
      ...list.filter((el) => !(el.title === newItem.title && el.group === newItem.group))
    ].slice(0, maxItemsAllowed);
  },
  addToSearchHistory(searchItem, group, url) {
    const searchItemObject = { title: searchItem, group, url };
    this.search_history = this.updateList(
      this.search_history,
      searchItemObject
    );
  },
  deleteFromHistory(searchItem, group) {
    console.log("here");
    this.search_history = this.search_history.filter(
      (el) => !(el.title === searchItem && el.group === group)
    );
  },
  deleteAllHistory() {
    this.search_history = [];
  },
  addToFavorites(favItem, group, url) {
    if (!retainRecentIfFavorite) {
      this.deleteFromHistory(favItem, group);
    }
    const favItemObject = { title: favItem, group, url };
    this.favorite_items = this.updateList(
      this.favorite_items,
      favItemObject
    );
  },
  deleteFromFavorites(favItem, group) {
    this.favorite_items = this.favorite_items.filter(
      (el) => !(el.title === favItem && el.group === group)
    );
  },
  deleteAllFavorites() {
    this.favorite_items = [];
  }
});
export {
  search_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vcmVzb3VyY2VzL2pzL3NlYXJjaC5qcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiZXhwb3J0IGRlZmF1bHQgKHtcclxuICAgIHJlY2VudFNlYXJjaGVzS2V5LFxyXG4gICAgZmF2b3JpdGVTZWFyY2hlc0tleSxcclxuICAgIG1heEl0ZW1zQWxsb3dlZCxcclxuICAgIHJldGFpblJlY2VudElmRmF2b3JpdGVcclxufSkgPT4gKHtcclxuICAgIHNlYXJjaF9oaXN0b3J5OiBbXSxcclxuICAgIGZhdm9yaXRlX2l0ZW1zOiBbXSxcclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHRoaXMuc2VhcmNoX2hpc3RvcnkgPSB0aGlzLmdldExvY2FsU3RvcmFnZShyZWNlbnRTZWFyY2hlc0tleSk7XHJcbiAgICAgICAgdGhpcy5mYXZvcml0ZV9pdGVtcyA9IHRoaXMuZ2V0TG9jYWxTdG9yYWdlKGZhdm9yaXRlU2VhcmNoZXNLZXkpO1xyXG5cclxuICAgICAgICB0aGlzLiR3YXRjaChcInNlYXJjaF9oaXN0b3J5XCIsICh2YWwpID0+XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TG9jYWxTdG9yYWdlKHJlY2VudFNlYXJjaGVzS2V5LCB2YWwpXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLiR3YXRjaChcImZhdm9yaXRlX2l0ZW1zXCIsICh2YWwpID0+XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TG9jYWxTdG9yYWdlKGZhdm9yaXRlU2VhcmNoZXNLZXksIHZhbClcclxuICAgICAgICApO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRMb2NhbFN0b3JhZ2Uoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSkgfHwgW107XHJcbiAgICB9LFxyXG5cclxuICAgIHNldExvY2FsU3RvcmFnZShrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGVMaXN0KGxpc3QsIG5ld0l0ZW0pIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBuZXdJdGVtLFxyXG4gICAgICAgICAgICAuLi5saXN0LmZpbHRlcigoZWwpID0+ICEoZWwudGl0bGUgPT09IG5ld0l0ZW0udGl0bGUgJiYgZWwuZ3JvdXAgPT09IG5ld0l0ZW0uZ3JvdXApKSxcclxuICAgICAgICBdLnNsaWNlKDAsIG1heEl0ZW1zQWxsb3dlZCk7XHJcbiAgICB9LFxyXG5cclxuICAgIGFkZFRvU2VhcmNoSGlzdG9yeShzZWFyY2hJdGVtLCBncm91cCwgdXJsKSB7XHJcbiAgICAgICAgY29uc3Qgc2VhcmNoSXRlbU9iamVjdCA9IHsgdGl0bGU6IHNlYXJjaEl0ZW0sIGdyb3VwLCB1cmwgfTtcclxuICAgICAgICB0aGlzLnNlYXJjaF9oaXN0b3J5ID0gdGhpcy51cGRhdGVMaXN0KFxyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaF9oaXN0b3J5LFxyXG4gICAgICAgICAgICBzZWFyY2hJdGVtT2JqZWN0XHJcbiAgICAgICAgKTtcclxuICAgIH0sXHJcblxyXG4gICAgZGVsZXRlRnJvbUhpc3Rvcnkoc2VhcmNoSXRlbSwgZ3JvdXApIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnaGVyZScpO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoX2hpc3RvcnkgPSB0aGlzLnNlYXJjaF9oaXN0b3J5LmZpbHRlcihcclxuICAgICAgICAgICAgKGVsKSA9PiAhKGVsLnRpdGxlID09PSBzZWFyY2hJdGVtICYmIGVsLmdyb3VwID09PSBncm91cClcclxuICAgICAgICApO1xyXG4gICAgfSxcclxuXHJcbiAgICBkZWxldGVBbGxIaXN0b3J5KCkge1xyXG4gICAgICAgIHRoaXMuc2VhcmNoX2hpc3RvcnkgPSBbXTtcclxuICAgIH0sXHJcblxyXG4gICAgYWRkVG9GYXZvcml0ZXMoZmF2SXRlbSwgZ3JvdXAsIHVybCkge1xyXG4gICAgICAgIGlmICghcmV0YWluUmVjZW50SWZGYXZvcml0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmRlbGV0ZUZyb21IaXN0b3J5KGZhdkl0ZW0sIGdyb3VwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZmF2SXRlbU9iamVjdCA9IHsgdGl0bGU6IGZhdkl0ZW0sIGdyb3VwLCB1cmwgfTtcclxuICAgICAgICB0aGlzLmZhdm9yaXRlX2l0ZW1zID0gdGhpcy51cGRhdGVMaXN0KFxyXG4gICAgICAgICAgICB0aGlzLmZhdm9yaXRlX2l0ZW1zLFxyXG4gICAgICAgICAgICBmYXZJdGVtT2JqZWN0XHJcbiAgICAgICAgKTtcclxuICAgIH0sXHJcblxyXG4gICAgZGVsZXRlRnJvbUZhdm9yaXRlcyhmYXZJdGVtLCBncm91cCkge1xyXG4gICAgICAgIHRoaXMuZmF2b3JpdGVfaXRlbXMgPSB0aGlzLmZhdm9yaXRlX2l0ZW1zLmZpbHRlcihcclxuICAgICAgICAgICAgKGVsKSA9PiAhKGVsLnRpdGxlID09PSBmYXZJdGVtICYmIGVsLmdyb3VwID09PSBncm91cClcclxuICAgICAgICApO1xyXG4gICAgfSxcclxuXHJcbiAgICBkZWxldGVBbGxGYXZvcml0ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5mYXZvcml0ZV9pdGVtcyA9IFtdO1xyXG4gICAgfSxcclxufSk7Il0sCiAgIm1hcHBpbmdzIjogIjtBQUFBLElBQU8saUJBQVEsQ0FBQztBQUFBLEVBQ1o7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDSixPQUFPO0FBQUEsRUFDSCxnQkFBZ0IsQ0FBQztBQUFBLEVBQ2pCLGdCQUFnQixDQUFDO0FBQUEsRUFFakIsT0FBTztBQUNILFNBQUssaUJBQWlCLEtBQUssZ0JBQWdCLGlCQUFpQjtBQUM1RCxTQUFLLGlCQUFpQixLQUFLLGdCQUFnQixtQkFBbUI7QUFFOUQsU0FBSztBQUFBLE1BQU87QUFBQSxNQUFrQixDQUFDLFFBQzNCLEtBQUssZ0JBQWdCLG1CQUFtQixHQUFHO0FBQUEsSUFDL0M7QUFDQSxTQUFLO0FBQUEsTUFBTztBQUFBLE1BQWtCLENBQUMsUUFDM0IsS0FBSyxnQkFBZ0IscUJBQXFCLEdBQUc7QUFBQSxJQUNqRDtBQUFBLEVBQ0o7QUFBQSxFQUVBLGdCQUFnQixLQUFLO0FBQ2pCLFdBQU8sS0FBSyxNQUFNLGFBQWEsUUFBUSxHQUFHLENBQUMsS0FBSyxDQUFDO0FBQUEsRUFDckQ7QUFBQSxFQUVBLGdCQUFnQixLQUFLLE9BQU87QUFDeEIsaUJBQWEsUUFBUSxLQUFLLEtBQUssVUFBVSxLQUFLLENBQUM7QUFBQSxFQUNuRDtBQUFBLEVBRUEsV0FBVyxNQUFNLFNBQVM7QUFDdEIsV0FBTztBQUFBLE1BQ0g7QUFBQSxNQUNBLEdBQUcsS0FBSyxPQUFPLENBQUMsT0FBTyxFQUFFLEdBQUcsVUFBVSxRQUFRLFNBQVMsR0FBRyxVQUFVLFFBQVEsTUFBTTtBQUFBLElBQ3RGLEVBQUUsTUFBTSxHQUFHLGVBQWU7QUFBQSxFQUM5QjtBQUFBLEVBRUEsbUJBQW1CLFlBQVksT0FBTyxLQUFLO0FBQ3ZDLFVBQU0sbUJBQW1CLEVBQUUsT0FBTyxZQUFZLE9BQU8sSUFBSTtBQUN6RCxTQUFLLGlCQUFpQixLQUFLO0FBQUEsTUFDdkIsS0FBSztBQUFBLE1BQ0w7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQUFBLEVBRUEsa0JBQWtCLFlBQVksT0FBTztBQUNqQyxZQUFRLElBQUksTUFBTTtBQUNsQixTQUFLLGlCQUFpQixLQUFLLGVBQWU7QUFBQSxNQUN0QyxDQUFDLE9BQU8sRUFBRSxHQUFHLFVBQVUsY0FBYyxHQUFHLFVBQVU7QUFBQSxJQUN0RDtBQUFBLEVBQ0o7QUFBQSxFQUVBLG1CQUFtQjtBQUNmLFNBQUssaUJBQWlCLENBQUM7QUFBQSxFQUMzQjtBQUFBLEVBRUEsZUFBZSxTQUFTLE9BQU8sS0FBSztBQUNoQyxRQUFJLENBQUMsd0JBQXdCO0FBQ3pCLFdBQUssa0JBQWtCLFNBQVMsS0FBSztBQUFBLElBQ3pDO0FBQ0EsVUFBTSxnQkFBZ0IsRUFBRSxPQUFPLFNBQVMsT0FBTyxJQUFJO0FBQ25ELFNBQUssaUJBQWlCLEtBQUs7QUFBQSxNQUN2QixLQUFLO0FBQUEsTUFDTDtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQUEsRUFFQSxvQkFBb0IsU0FBUyxPQUFPO0FBQ2hDLFNBQUssaUJBQWlCLEtBQUssZUFBZTtBQUFBLE1BQ3RDLENBQUMsT0FBTyxFQUFFLEdBQUcsVUFBVSxXQUFXLEdBQUcsVUFBVTtBQUFBLElBQ25EO0FBQUEsRUFDSjtBQUFBLEVBRUEscUJBQXFCO0FBQ2pCLFNBQUssaUJBQWlCLENBQUM7QUFBQSxFQUMzQjtBQUNKOyIsCiAgIm5hbWVzIjogW10KfQo=
